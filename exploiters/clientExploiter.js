// ReferÃªncia: https://riptutorial.com/node-js/example/22406/a-simple-tcp-client

const Net = require('net');

const port = 80;
const host = 'google.com';

// Create a new TCP client.
const client = new Net.Socket();

const REQUEST = `${[
  'GET / HTTP/1.1',
  'Host: google.com',
  'Connection: keep-alive',
].join('\r\n')}\r\n\r\n`;

// Send a connection request to the server.
client.connect({ port, host }, () => {
  // If there is no error, the server has accepted the request and created a new
  // socket dedicated to us.
  // console.log('TCP connection established with the server.');

  // The client can now send data to the server by writing to its socket.
  client.write(REQUEST);

  // The client can also receive data from the server by reading from its socket.
  client.on('data', (chunk) => {
    console.log(`${chunk.toString()}.`);
    // Request an end to the connection after the data has been received.
    client.end();
  });

  client.on('end', () => {
    console.log('Requested an end to the TCP connection');
  });
});
